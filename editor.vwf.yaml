# Copyright 2014 Lockheed Martin Corporation
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may 
# not use this file except in compliance with the License. You may obtain 
# a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software 
# distributed under the License is distributed on an "AS IS" BASIS, 
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and 
# limitations under the License.

# The Mars educational game content Editor created for ADL's True Game-based learning project
--- 
extends: http://vwf.example.com/scene.vwf
properties:
  backgroundColor: [ 10, 20, 30 ]
  ambientColor: [ 150, 140, 140 ]
  activeTool: camera
  enableShadows: true
children:
  graph:
    extends: http://vwf.example.com/graphtool/graph.vwf
    properties:
      graphScale: 3
      gridInterval: 1
      gridLineInterval: 10
      gridLength: 100
      xAxisVisible: true
      yAxisVisible: true
      zAxisVisible: true
      gridVisible: true
      axisOpacity: 1
      gridOpacity: 0.5
      renderTop: false
      tileVisible: true
    children:
      editToolTiles:
        extends: http://vwf.example.com/graphtool/graphgroup.vwf
        properties:
          groupVisible: false
          graphObjects: []
    methods:
      toggleTileVisibility: |
        this.tileVisible = !this.tileVisible;
        for ( var tile in this.children ) {
          this.children[ tile ].visible = this.tileVisible;
        }
  grid:
    extends: source/grid.vwf
    properties:
      minX: -100
      maxX: 100
      minY: -100
      maxY: 100
      gridOriginInSpace: []
      gridSquareLength: 3
      boundaryValues: []
    scripts: |
      this.initialize = function() {
        var xlen = this.maxX - this.minX;
        var ylen = this.maxY - this.minY;
        this.gridOriginInSpace = [
          Math.floor( -xlen / 2 * this.gridSquareLength ),
          Math.floor( -ylen / 2 * this.gridSquareLength )
        ];
        for ( var x = 0; x < this.maxX - this.minX; x++ ) {
          this.boundaryValues.push( new Array() );
          for ( var y = 0; y < this.maxY - this.minY; y++ ) {
            this.boundaryValues[ x ].push( 0 );
          }
        }
      }
  editTool:
    extends: http://vwf.example.com/node3.vwf
    implements: source/griddable.vwf
    properties:
      selectedObjectId: undefined
    children:
      grid:
        extends: source/grid.vwf
        properties:
          minX: 0
          maxX: 1
          minY: 0
          maxY: 1
          gridOriginInSpace: [ 0, 0 ]
          gridSquareLength: 3
          boundaryValues: []
        methods:
          updateGrid:
          moveGridOrigin:
        events:
          gridUpdated:
          gridMoved:
        scripts:
          - source: editor/editTool.js
  scenarioGenerator:
    extends: http://vwf.example.com/node.vwf
    properties:
      scenarios:
    methods:
    events:
    scripts:
      - source: editor/scenarioGenerator.js
  sunLight:
    extends: http://vwf.example.com/light.vwf
    properties:
      lightType: "directional"
      color: [ 255, 245, 230 ]
      translation: [ 0, 0, 1 ]
      intensity: 0.5
      castShadows: true
      shadowDarkness: 0.5
      shadowCameraBottom: -64
      shadowCameraTop: 64
      shadowCameraLeft: -64
      shadowCameraRight: 64
      shadowCameraNear: -32
      shadowCameraFar: 32
      shadowMapWidth: 2048
      shadowMapHeight: 2048
      shadowBias: 0
  envLight:
    extends: http://vwf.example.com/light.vwf
    properties:
      lightType: "hemisphere"
      translation: [ 0, 0, 100 ]
      color: [ 255, 200, 175 ]
      groundColor: [ 200, 160, 80 ]
      intensity: 0.7
methods:
  clearLevel:
  loadMap:
  deleteMap:
  loadObject:
  deleteObject:
  createObject:
  createGridDisplay:
  removeGridDisplay:
  createEditToolGrid:
  removeEditToolGrid:
  drag:
  stopDrag:
  setUpListeners:
  selectObject:
  deselectObject:
  setActiveTool:
  createLevelFromFile:
  setSunPos:
  cycleSun:
  # Methods handled by View
  requestDelete:
events:
  onSceneReady:
  pointerOver:
  pointerOut:
  pointerMove:
  pointerDown:
  pointerClick:
  objectCreated:
  objectDeleted:
  objectModified:
scripts: 
  - source: editor/scene.js